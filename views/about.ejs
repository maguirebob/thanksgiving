<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="main-title">About Thanksgiving Menus</h1>
                <p class="lead text-muted">Version <%= versionInfo.displayVersion || versionInfo.version %></p>
            </div>

            <!-- Application Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-info-circle me-2"></i>
                        Application Information
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Name:</dt>
                                <dd class="col-sm-8"><%= versionInfo.name %></dd>
                                
                                <dt class="col-sm-4">Version:</dt>
                                <dd class="col-sm-8">
                                    <span class="badge bg-primary"><%= versionInfo.version %></span>
                                </dd>
                                
                                <dt class="col-sm-4">Author:</dt>
                                <dd class="col-sm-8"><%= versionInfo.author %></dd>
                                
                                <dt class="col-sm-4">License:</dt>
                                <dd class="col-sm-8"><%= versionInfo.license %></dd>
                            </dl>
                        </div>
                        <div class="col-md-6">
                            <dl class="row">
                                <dt class="col-sm-4">Environment:</dt>
                                <dd class="col-sm-8">
                                    <span class="badge bg-<%= versionInfo.environment === 'production' ? 'success' : 'warning' %>">
                                        <%= versionInfo.environment %>
                                    </span>
                                </dd>
                                
                                <dt class="col-sm-4">Node.js:</dt>
                                <dd class="col-sm-8"><%= versionInfo.nodeVersion %></dd>
                                
                                <dt class="col-sm-4">Build Date:</dt>
                                <dd class="col-sm-8"><%= new Date(versionInfo.buildDate).toLocaleDateString() %></dd>
                            </dl>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <h5>Description</h5>
                        <p class="text-muted"><%= versionInfo.description %></p>
                    </div>
                </div>
            </div>

            <!-- Version History -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-history me-2"></i>
                        Version History
                    </h3>
                </div>
                <div class="card-body">
                    <div class="version-entry">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h5 class="mb-0">
                                <span class="badge bg-primary me-2"><%= changelog.date %></span>
                                Version <%= versionInfo.version %>
                            </h5>
                        </div>
                        <ul class="list-unstyled ms-4">
                            <% changelog.changes.forEach(function(change) { %>
                                <li class="mb-1">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <%= change %>
                                </li>
                            <% }); %>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-cogs me-2"></i>
                        Technical Details
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Backend Technologies</h6>
                            <ul class="list-unstyled">
                                <li><i class="fab fa-node-js me-2"></i>Node.js <%= versionInfo.nodeVersion %></li>
                                <li><i class="fas fa-server me-2"></i>Express.js</li>
                                <li><i class="fas fa-database me-2"></i>PostgreSQL</li>
                                <li><i class="fas fa-layer-group me-2"></i>Sequelize ORM</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Frontend Technologies</h6>
                            <ul class="list-unstyled">
                                <li><i class="fab fa-html5 me-2"></i>HTML5</li>
                                <li><i class="fab fa-css3-alt me-2"></i>CSS3</li>
                                <li><i class="fab fa-js-square me-2"></i>JavaScript ES6+</li>
                                <li><i class="fas fa-paint-brush me-2"></i>Bootstrap 5</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Version Strategy -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-code-branch me-2"></i>
                        Version Strategy
                    </h3>
                </div>
                <div class="card-body">
                    <p>This application uses <strong>Semantic Versioning (SemVer)</strong> with the format <code>MAJOR.MINOR.PATCH</code>:</p>
                    <ul>
                        <li><strong>MAJOR</strong>: Breaking changes, major feature additions, or architectural changes</li>
                        <li><strong>MINOR</strong>: New features, enhancements, or significant improvements (backward compatible)</li>
                        <li><strong>PATCH</strong>: Bug fixes, small improvements, or minor updates</li>
                    </ul>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Current Version:</strong> <%= versionInfo.version %> 
                        <span class="text-muted">(<%= versionInfo.environment %> environment)</span>
                    </div>
                </div>
            </div>

            <!-- API Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-plug me-2"></i>
                        API Information
                    </h3>
                </div>
                <div class="card-body">
                    <p>Version information is also available via API endpoints:</p>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <code>GET /api/v1/version</code> - Complete version information
                        </li>
                        <li class="mb-2">
                            <code>GET /api/v1/version/display</code> - Version display for UI components
                        </li>
                    </ul>
                    <div class="mt-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="fetchVersionInfo()">
                            <i class="fas fa-download me-2"></i>
                            Test API Endpoint
                        </button>
                        <div id="apiResult" class="mt-2" style="display: none;">
                            <pre class="bg-light p-3 rounded"><code id="apiResultContent"></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function fetchVersionInfo() {
    fetch('/api/v1/version')
        .then(response => response.json())
        .then(data => {
            const resultDiv = document.getElementById('apiResult');
            const resultContent = document.getElementById('apiResultContent');
            resultContent.textContent = JSON.stringify(data, null, 2);
            resultDiv.style.display = 'block';
        })
        .catch(error => {
            const resultDiv = document.getElementById('apiResult');
            const resultContent = document.getElementById('apiResultContent');
            resultContent.textContent = 'Error: ' + error.message;
            resultDiv.style.display = 'block';
        });
}
</script>
