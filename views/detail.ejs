<!-- Back Navigation -->
<div class="mb-4">
    <a href="/" class="btn-view-details" style="background-color: var(--secondary-gray);">
        <i class="fas fa-arrow-left me-2"></i>
        Back to All Menus
    </a>
</div>

<!-- Menu Detail Layout -->
<div class="row">
    <!-- Main Content -->
    <div class="col-lg-8">
        <!-- Menu Header -->
        <div class="mb-4">
            <div class="menu-date"><%= new Date(event.event_date).toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            }) %></div>
            <h1 class="menu-title" style="font-size: 3rem; margin-bottom: 1rem;"><%= event.menu_title %></h1>
            <div class="menu-location" style="font-size: 1.1rem; margin-bottom: 2rem;"><%= event.event_location %></div>
        </div>

        <!-- Menu Image -->
        <div class="mb-5">
            <div class="menu-image-container" style="height: 600px; border-radius: 8px; background-color: #f8f9fa; border: 1px solid #e5e5e5; display: flex; align-items: center; justify-content: center; padding: 2rem; position: relative; overflow: hidden;">
                <img src="/images/<%= event.menu_image_filename %>" 
                     alt="<%= event.menu_title %>" 
                     id="menuImage"
                     style="max-width: 100%; max-height: 100%; object-fit: contain; object-position: center; border-radius: 4px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: zoom-in; transition: transform 0.3s ease;"
                     onerror="this.src='/images/placeholder-menu.jpg'"
                     onclick="toggleZoom()">
                
                <!-- Zoom overlay -->
                <div id="zoomOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); z-index: 9999; display: none; align-items: center; justify-content: center; cursor: zoom-out;" onclick="toggleZoom()">
                    <img src="/images/<%= event.menu_image_filename %>" 
                         alt="<%= event.menu_title %>" 
                         style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px;"
                         onerror="this.src='/images/placeholder-menu.jpg'">
                </div>
            </div>
            
            <!-- Image controls -->
            <div class="text-center mt-3">
                <button class="btn-view-details" onclick="toggleZoom()" style="margin-right: 1rem;">
                    <i class="fas fa-search-plus me-2"></i>
                    Zoom Image
                </button>
                <button class="btn-view-details" onclick="downloadImage()" style="background-color: var(--secondary-gray);">
                    <i class="fas fa-download me-2"></i>
                    Download
                </button>
            </div>
        </div>

        <!-- Description -->
        <div class="mb-5">
            <h2 class="section-title" style="font-size: 2rem; border-bottom: 2px solid var(--accent-orange);">About This Menu</h2>
            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--secondary-gray);"><%= event.event_description %></p>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="col-lg-4">
        <div class="sticky-top" style="top: 100px;">
            <!-- Menu Info Card -->
            <div class="menu-card" style="margin-bottom: 2rem;">
                <div class="menu-content">
                    <h3 style="font-family: 'Playfair Display', Georgia, serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--primary-black);">Menu Details</h3>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <div style="color: var(--secondary-gray); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">Event Type</div>
                        <div style="font-weight: 600; color: var(--primary-black);"><%= event.event_type %></div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <div style="color: var(--secondary-gray); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">Year</div>
                        <div style="font-weight: 600; color: var(--primary-black); font-size: 1.2rem;"><%= new Date(event.event_date).getFullYear() %></div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <div style="color: var(--secondary-gray); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">Location</div>
                        <div style="font-weight: 600; color: var(--primary-black);"><%= event.event_location %></div>
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <div style="color: var(--secondary-gray); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">Date</div>
                        <div style="font-weight: 600; color: var(--primary-black);"><%= new Date(event.event_date).toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        }) %></div>
                    </div>
                </div>
            </div>

            <!-- Share Card -->
            <div class="menu-card">
                <div class="menu-content">
                    <h3 style="font-family: 'Playfair Display', Georgia, serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--primary-black);">Share This Menu</h3>
                    
                    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                        <button class="btn-view-details" style="flex: 1; text-align: center; padding: 0.75rem;">
                            <i class="fab fa-facebook-f me-2"></i>
                            Facebook
                        </button>
                        <button class="btn-view-details" style="flex: 1; text-align: center; padding: 0.75rem;">
                            <i class="fab fa-twitter me-2"></i>
                            Twitter
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn-view-details" style="flex: 1; text-align: center; padding: 0.75rem;">
                            <i class="fab fa-pinterest me-2"></i>
                            Pinterest
                        </button>
                        <button class="btn-view-details" style="flex: 1; text-align: center; padding: 0.75rem;">
                            <i class="fas fa-link me-2"></i>
                            Copy Link
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Related Menus Section -->
<div class="mt-5">
    <h2 class="section-title">More Thanksgiving Menus</h2>
    <div class="menu-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
        <!-- This would be populated with related menus in a real implementation -->
        <div class="menu-card">
            <div class="menu-image-container" style="height: 200px;">
                <img src="/images/placeholder-menu.jpg" alt="Related menu" class="menu-image">
            </div>
            <div class="menu-content">
                <div class="menu-date">November 2023</div>
                <h3 class="menu-title">Thanksgiving 2023</h3>
                <div class="menu-location">Canajoharie, NY</div>
                <p class="menu-description">Another wonderful Thanksgiving celebration with family and friends.</p>
                <a href="#" class="btn-view-details">View Menu</a>
            </div>
        </div>
        
        <div class="menu-card">
            <div class="menu-image-container" style="height: 200px;">
                <img src="/images/placeholder-menu.jpg" alt="Related menu" class="menu-image">
            </div>
            <div class="menu-content">
                <div class="menu-date">November 2022</div>
                <h3 class="menu-title">Thanksgiving 2022</h3>
                <div class="menu-location">Canajoharie, NY</div>
                <p class="menu-description">A memorable Thanksgiving dinner with traditional favorites.</p>
                <a href="#" class="btn-view-details">View Menu</a>
            </div>
        </div>
    </div>
</div>

<!-- Navigation Footer -->
<div class="text-center mt-5">
    <a href="/" class="btn-view-details" style="padding: 1rem 2rem; font-size: 1.1rem;">
        <i class="fas fa-home me-2"></i>
        View All Menus
    </a>
</div>

<script>
// Image zoom functionality
function toggleZoom() {
    const overlay = document.getElementById('zoomOverlay');
    const body = document.body;
    
    if (overlay.style.display === 'none' || overlay.style.display === '') {
        overlay.style.display = 'flex';
        body.style.overflow = 'hidden'; // Prevent background scrolling
    } else {
        overlay.style.display = 'none';
        body.style.overflow = 'auto'; // Restore scrolling
    }
}

// Download image functionality
function downloadImage() {
    const img = document.getElementById('menuImage');
    const link = document.createElement('a');
    link.href = img.src;
    link.download = '<%= event.menu_title.replace(/[^a-z0-9]/gi, "_").toLowerCase() %>_menu.jpg';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

// Close zoom overlay with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const overlay = document.getElementById('zoomOverlay');
        if (overlay.style.display === 'flex') {
            toggleZoom();
        }
    }
});

// Responsive image sizing
function adjustImageSize() {
    const container = document.querySelector('.menu-image-container');
    const img = document.getElementById('menuImage');
    
    if (window.innerWidth < 768) {
        container.style.height = '400px';
        container.style.padding = '1rem';
    } else if (window.innerWidth < 1024) {
        container.style.height = '500px';
        container.style.padding = '1.5rem';
    } else {
        container.style.height = '600px';
        container.style.padding = '2rem';
    }
}

// Adjust image size on load and resize
window.addEventListener('load', adjustImageSize);
window.addEventListener('resize', adjustImageSize);
</script>